
> library-management@1.0.0 electron
> NODE_ENV=development electron .

PRAGMA journal_mode = WAL
PRAGMA synchronous = NORMAL
PRAGMA cache_size = 1000
PRAGMA temp_store = memory
PRAGMA foreign_keys = ON
CREATE TABLE IF NOT EXISTS _test_write (id INTEGER)
DROP TABLE IF EXISTS _test_write
Database write access verified

    CREATE TABLE IF NOT EXISTS membership_plans (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      name TEXT NOT NULL,
      duration_days INTEGER NOT NULL,
      price REAL NOT NULL,
      description TEXT,
      created_at TEXT DEFAULT CURRENT_TIMESTAMP
    )
  

    CREATE TABLE IF NOT EXISTS members (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      name TEXT NOT NULL,
      email TEXT,
      phone TEXT,
      birth_date TEXT,
      city TEXT,
      address TEXT,
      seat_no TEXT UNIQUE,
      plan_id INTEGER,
      join_date TEXT NOT NULL,
      end_date TEXT NOT NULL,
      status TEXT DEFAULT 'active' CHECK(status IN ('active', 'expired', 'suspended')),
      fingerprint_template BLOB,
      qr_code TEXT,
      created_at TEXT DEFAULT CURRENT_TIMESTAMP,
      updated_at TEXT DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (plan_id) REFERENCES membership_plans (id)
    )
  

    CREATE TABLE IF NOT EXISTS payments (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      member_id INTEGER,
      amount REAL NOT NULL,
      mode TEXT DEFAULT 'cash' CHECK(mode IN ('cash', 'card', 'upi', 'bank_transfer')),
      plan_id INTEGER,
      note TEXT,
      receipt_number TEXT,
      paid_at TEXT DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (member_id) REFERENCES members (id) ON DELETE SET NULL,
      FOREIGN KEY (plan_id) REFERENCES membership_plans (id),
      FOREIGN KEY (created_by) REFERENCES users (id)
    )
  

    CREATE TABLE IF NOT EXISTS attendance (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      member_id INTEGER NOT NULL,
      check_in TEXT DEFAULT CURRENT_TIMESTAMP,
      check_out TEXT,
      source TEXT DEFAULT 'manual' CHECK(source IN ('biometric', 'manual', 'card', 'qr')),
      created_at TEXT DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (member_id) REFERENCES members (id) ON DELETE CASCADE
    )
  

    CREATE TABLE IF NOT EXISTS users (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      username TEXT UNIQUE NOT NULL,
      password_hash TEXT NOT NULL,
      role TEXT DEFAULT 'receptionist' CHECK(role IN ('admin', 'receptionist')),
      full_name TEXT,
      email TEXT,
      is_active INTEGER DEFAULT 1,
      created_at TEXT DEFAULT CURRENT_TIMESTAMP,
      last_login TEXT
    )
  

    CREATE TABLE IF NOT EXISTS notifications (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      member_id INTEGER NOT NULL,
      type TEXT NOT NULL CHECK(type IN ('email', 'whatsapp', 'sms')),
      subject TEXT,
      message TEXT,
      status TEXT DEFAULT 'pending' CHECK(status IN ('pending', 'sent', 'failed')),
      sent_at TEXT,
      error_message TEXT,
      created_at TEXT DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (member_id) REFERENCES members (id) ON DELETE CASCADE
    )
  

    CREATE TABLE IF NOT EXISTS settings (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      key TEXT UNIQUE NOT NULL,
      value TEXT,
      description TEXT,
      updated_at TEXT DEFAULT CURRENT_TIMESTAMP
    )
  
PRAGMA table_info(members)
SELECT COUNT(*) as count FROM membership_plans
SELECT COUNT(*) as count FROM users
SELECT COUNT(*) as count FROM settings
PRAGMA table_info(members)
PRAGMA foreign_key_list(payments)
Payments table already has correct foreign key constraints
Database migrations completed successfully
Window created, showing...
Database initialized successfully
Initializing notifier...
Starting scheduler...
Starting scheduler service...
Scheduler service started successfully
All services initialized successfully
Loading from development server: http://localhost:5173/
Successfully loaded from development server
[12318:0815/134038.118888:ERROR:ui/gl/gl_surface_presentation_helper.cc:260] GetVSyncParametersIfAvailable() failed for 1 times!
Forcing window to show...
[12283:0815/134038.371835:ERROR:CONSOLE:1] "Request Autofill.enable failed. {"code":-32601,"message":"'Autofill.enable' wasn't found"}", source: devtools://devtools/bundled/core/protocol_client/protocol_client.js (1)
[12283:0815/134038.371953:ERROR:CONSOLE:1] "Request Autofill.setAddresses failed. {"code":-32601,"message":"'Autofill.setAddresses' wasn't found"}", source: devtools://devtools/bundled/core/protocol_client/protocol_client.js (1)
Stopping scheduler service...
Scheduler service stopped
Killed dev server (PID: 12196)
